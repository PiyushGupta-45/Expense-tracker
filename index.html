<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Expense Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }

        .category-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .expense-item:hover {
            transform: translateX(4px);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Icons Component (since we can't import lucide-react)
        const Icons = {
            PlusCircle: () => (
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="16"/>
                    <line x1="8" y1="12" x2="16" y2="12"/>
                </svg>
            ),
            DollarSign: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <line x1="12" y1="1" x2="12" y2="23"/>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                </svg>
            ),
            TrendingUp: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                    <polyline points="17 6 23 6 23 12"/>
                </svg>
            ),
            Calendar: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
            ),
            Filter: () => (
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
                </svg>
            ),
            Search: () => (
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="21 21L16.65 16.65"/>
                </svg>
            ),
            Edit: () => (
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
                </svg>
            ),
            Trash: () => (
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <polyline points="3,6 5,6 21,6"/>
                    <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2v2"/>
                </svg>
            ),
            PieChart: () => (
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M21.21 15.89A10 10 0 1 1 8 2.83"/>
                    <path d="M22 12A10 10 0 0 0 12 2v10z"/>
                </svg>
            ),
            BarChart: () => (
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <line x1="12" y1="20" x2="12" y2="10"/>
                    <line x1="18" y1="20" x2="18" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="16"/>
                </svg>
            ),
            Download: () => (
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7,10 12,15 17,10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            )
        };

        // Main Application Component
        const ExpenseTracker = () => {
            const [expenses, setExpenses] = useState([]);
            const [showAddForm, setShowAddForm] = useState(false);
            const [editingExpense, setEditingExpense] = useState(null);
            const [filterCategory, setFilterCategory] = useState('all');
            const [searchTerm, setSearchTerm] = useState('');
            const [dateRange, setDateRange] = useState('all');
            const [viewMode, setViewMode] = useState('list');
            const [isLoading, setIsLoading] = useState(true);

            const categories = [
                { id: 'food', name: 'Food & Dining', color: '#FF6B6B', icon: 'ðŸ•' },
                { id: 'transport', name: 'Transportation', color: '#4ECDC4', icon: 'ðŸš—' },
                { id: 'entertainment', name: 'Entertainment', color: '#45B7D1', icon: 'ðŸŽ¬' },
                { id: 'shopping', name: 'Shopping', color: '#96CEB4', icon: 'ðŸ›ï¸' },
                { id: 'bills', name: 'Bills & Utilities', color: '#FFEAA7', icon: 'ðŸ’¡' },
                { id: 'health', name: 'Healthcare', color: '#DDA0DD', icon: 'ðŸ¥' },
                { id: 'education', name: 'Education', color: '#98D8C8', icon: 'ðŸ“š' },
                { id: 'other', name: 'Other', color: '#F7DC6F', icon: 'ðŸ“¦' }
            ];

            const [formData, setFormData] = useState({
                description: '',
                amount: '',
                category: 'food',
                date: new Date().toISOString().split('T')[0]
            });

            // Load data on component mount
            useEffect(() => {
                const loadData = () => {
                    try {
                        const savedExpenses = JSON.parse(localStorage.getItem('expenseTracker_expenses') || '[]');
                        setExpenses(savedExpenses);
                    } catch (error) {
                        console.error('Error loading expenses:', error);
                        setExpenses([]);
                    }
                    setIsLoading(false);
                };
                
                setTimeout(loadData, 500); // Simulate loading
            }, []);

            // Save to localStorage whenever expenses change
            useEffect(() => {
                if (!isLoading) {
                    try {
                        localStorage.setItem('expenseTracker_expenses', JSON.stringify(expenses));
                    } catch (error) {
                        console.error('Error saving expenses:', error);
                    }
                }
            }, [expenses, isLoading]);

            // Filtered expenses
            const filteredExpenses = useMemo(() => {
                return expenses.filter(expense => {
                    const matchesCategory = filterCategory === 'all' || expense.category === filterCategory;
                    const matchesSearch = expense.description.toLowerCase().includes(searchTerm.toLowerCase());
                    const expenseDate = new Date(expense.date);
                    const now = new Date();
                    
                    let matchesDate = true;
                    if (dateRange === 'today') {
                        matchesDate = expenseDate.toDateString() === now.toDateString();
                    } else if (dateRange === 'week') {
                        const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                        matchesDate = expenseDate >= weekAgo;
                    } else if (dateRange === 'month') {
                        const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                        matchesDate = expenseDate >= monthAgo;
                    }
                    
                    return matchesCategory && matchesSearch && matchesDate;
                });
            }, [expenses, filterCategory, searchTerm, dateRange]);

            // Analytics calculations
            const analytics = useMemo(() => {
                const total = filteredExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                const categoryTotals = categories.map(category => ({
                    ...category,
                    total: filteredExpenses
                        .filter(expense => expense.category === category.id)
                        .reduce((sum, expense) => sum + expense.amount, 0)
                })).filter(category => category.total > 0);

                const dailySpending = filteredExpenses.reduce((acc, expense) => {
                    const date = expense.date;
                    acc[date] = (acc[date] || 0) + expense.amount;
                    return acc;
                }, {});

                const monthlyAverage = total / Math.max(Object.keys(dailySpending).length, 1);

                return { total, categoryTotals, dailySpending, monthlyAverage };
            }, [filteredExpenses, categories]);

            const handleSubmit = (e) => {
                e.preventDefault();
                
                if (!formData.description.trim() || !formData.amount || parseFloat(formData.amount) <= 0) {
                    alert('Please fill in all required fields with valid data');
                    return;
                }

                const expenseData = {
                    id: editingExpense?.id || Date.now(),
                    ...formData,
                    amount: parseFloat(formData.amount),
                    createdAt: editingExpense?.createdAt || new Date().toISOString()
                };

                if (editingExpense) {
                    setExpenses(expenses.map(exp => exp.id === editingExpense.id ? expenseData : exp));
                    setEditingExpense(null);
                } else {
                    setExpenses([expenseData, ...expenses]);
                }

                setFormData({ 
                    description: '', 
                    amount: '', 
                    category: 'food', 
                    date: new Date().toISOString().split('T')[0] 
                });
                setShowAddForm(false);
            };

            const handleEdit = (expense) => {
                setEditingExpense(expense);
                setFormData({
                    description: expense.description,
                    amount: expense.amount.toString(),
                    category: expense.category,
                    date: expense.date
                });
                setShowAddForm(true);
            };

            const handleDelete = (id) => {
                if (window.confirm('Are you sure you want to delete this expense?')) {
                    setExpenses(expenses.filter(exp => exp.id !== id));
                }
            };

            const getCategoryInfo = (categoryId) => {
                return categories.find(cat => cat.id === categoryId) || categories[categories.length - 1];
            };

            const exportData = () => {
                const dataStr = JSON.stringify(expenses, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `expenses_${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            };

            if (isLoading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center">
                        <div className="text-center">
                            <div className="animate-pulse">
                                <div className="w-16 h-16 bg-blue-500 rounded-full mx-auto mb-4"></div>
                                <h2 className="text-2xl font-bold text-slate-800">Loading Expense Tracker...</h2>
                                <p className="text-slate-600 mt-2">Getting your financial data ready</p>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
                    <div className="container mx-auto px-4 py-8 max-w-7xl">
                        {/* Header */}
                        <div className="text-center mb-8 fade-in">
                            <h1 className="text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">
                                Expense Tracker Pro
                            </h1>
                            <p className="text-slate-600 text-lg">Take complete control of your finances with intelligent tracking</p>
                        </div>

                        {/* Stats Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500 category-card transition-all duration-300">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-slate-600 text-sm font-medium">Total Spent</p>
                                        <p className="text-2xl font-bold text-slate-800">â‚¹{analytics.total.toFixed(2)}</p>
                                    </div>
                                    <div className="p-3 bg-blue-100 rounded-full">
                                        <Icons.DollarSign />
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500 category-card transition-all duration-300">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-slate-600 text-sm font-medium">Total Expenses</p>
                                        <p className="text-2xl font-bold text-slate-800">{filteredExpenses.length}</p>
                                    </div>
                                    <div className="p-3 bg-green-100 rounded-full">
                                        <Icons.TrendingUp />
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500 category-card transition-all duration-300">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-slate-600 text-sm font-medium">Daily Average</p>
                                        <p className="text-2xl font-bold text-slate-800">
                                            â‚¹{analytics.monthlyAverage.toFixed(2)}
                                        </p>
                                    </div>
                                    <div className="p-3 bg-purple-100 rounded-full">
                                        <Icons.Calendar />
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500 category-card transition-all duration-300">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-slate-600 text-sm font-medium">Categories Used</p>
                                        <p className="text-2xl font-bold text-slate-800">{analytics.categoryTotals.length}</p>
                                    </div>
                                    <div className="p-3 bg-orange-100 rounded-full">
                                        <Icons.PieChart />
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Controls */}
                        <div className="glass-effect rounded-xl shadow-lg p-6 mb-8 slide-up">
                            <div className="flex flex-wrap gap-4 items-center justify-between">
                                <div className="flex flex-wrap gap-4">
                                    <button
                                        onClick={() => setShowAddForm(true)}
                                        className="flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
                                    >
                                        <Icons.PlusCircle />
                                        Add Expense
                                    </button>
                                    
                                    <button
                                        onClick={exportData}
                                        className="flex items-center gap-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
                                    >
                                        <Icons.Download />
                                        Export Data
                                    </button>
                                    
                                    <div className="flex items-center gap-2 bg-white rounded-lg shadow-md p-1">
                                        <button
                                            onClick={() => setViewMode('list')}
                                            className={`p-2 rounded-md transition-all duration-200 ${viewMode === 'list' ? 'bg-blue-500 text-white shadow-md' : 'text-slate-600 hover:bg-slate-100'}`}
                                        >
                                            <Icons.Filter />
                                        </button>
                                        <button
                                            onClick={() => setViewMode('chart')}
                                            className={`p-2 rounded-md transition-all duration-200 ${viewMode === 'chart' ? 'bg-blue-500 text-white shadow-md' : 'text-slate-600 hover:bg-slate-100'}`}
                                        >
                                            <Icons.PieChart />
                                        </button>
                                        <button
                                            onClick={() => setViewMode('analytics')}
                                            className={`p-2 rounded-md transition-all duration-200 ${viewMode === 'analytics' ? 'bg-blue-500 text-white shadow-md' : 'text-slate-600 hover:bg-slate-100'}`}
                                        >
                                            <Icons.BarChart />
                                        </button>
                                    </div>
                                </div>

                                <div className="flex flex-wrap gap-4">
                                    <div className="relative">
                                        <div className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400">
                                            <Icons.Search />
                                        </div>
                                        <input
                                            type="text"
                                            placeholder="Search expenses..."
                                            value={searchTerm}
                                            onChange={(e) => setSearchTerm(e.target.value)}
                                            className="pl-10 pr-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm transition-all duration-200"
                                        />
                                    </div>
                                    
                                    <select
                                        value={filterCategory}
                                        onChange={(e) => setFilterCategory(e.target.value)}
                                        className="px-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm transition-all duration-200"
                                    >
                                        <option value="all">All Categories</option>
                                        {categories.map(category => (
                                            <option key={category.id} value={category.id}>{category.name}</option>
                                        ))}
                                    </select>
                                    
                                    <select
                                        value={dateRange}
                                        onChange={(e) => setDateRange(e.target.value)}
                                        className="px-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm transition-all duration-200"
                                    >
                                        <option value="all">All Time</option>
                                        <option value="today">Today</option>
                                        <option value="week">Last Week</option>
                                        <option value="month">Last Month</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        {/* Add/Edit Form Modal */}
                        {showAddForm && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                                <div className="bg-white rounded-xl p-8 w-full max-w-md mx-4 shadow-2xl slide-up">
                                    <h2 className="text-2xl font-bold mb-6 text-center text-slate-800">
                                        {editingExpense ? 'Edit Expense' : 'Add New Expense'}
                                    </h2>
                                    <div className="space-y-6">
                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Description</label>
                                            <input
                                                type="text"
                                                value={formData.description}
                                                onChange={(e) => setFormData({...formData, description: e.target.value})}
                                                className="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                                                placeholder="Enter expense description"
                                            />
                                        </div>
                                        
                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Amount</label>
                                            <input
                                                type="number"
                                                step="0.01"
                                                value={formData.amount}
                                                onChange={(e) => setFormData({...formData, amount: e.target.value})}
                                                className="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                                                placeholder="0.00"
                                            />
                                        </div>
                                        
                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Category</label>
                                            <select
                                                value={formData.category}
                                                onChange={(e) => setFormData({...formData, category: e.target.value})}
                                                className="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                                            >
                                                {categories.map(category => (
                                                    <option key={category.id} value={category.id}>{category.icon} {category.name}</option>
                                                ))}
                                            </select>
                                        </div>
                                        
                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-2">Date</label>
                                            <input
                                                type="date"
                                                value={formData.date}
                                                onChange={(e) => setFormData({...formData, date: e.target.value})}
                                                className="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                                            />
                                        </div>
                                    </div>
                                    
                                    <div className="flex gap-4 mt-8">
                                        <button
                                            onClick={handleSubmit}
                                            className="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 rounded-lg transition-all duration-200 font-semibold shadow-lg"
                                        >
                                            {editingExpense ? 'Update Expense' : 'Add Expense'}
                                        </button>
                                        <button
                                            onClick={() => {
                                                setShowAddForm(false);
                                                setEditingExpense(null);
                                                setFormData({ description: '', amount: '', category: 'food', date: new Date().toISOString().split('T')[0] });
                                            }}
                                            className="flex-1 bg-slate-300 hover:bg-slate-400 text-slate-700 py-3 rounded-lg transition-all duration-200 font-semibold"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Content based on view mode */}
                        {viewMode === 'list' && (
                            <div className="bg-white rounded-xl shadow-lg p-6 slide-up">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold text-slate-800">Recent Expenses</h2>
                                    <span className="text-sm text-slate-500">{filteredExpenses.length} expenses</span>
                                </div>
                                {filteredExpenses.length === 0 ? (
                                    <div className="text-center py-16">
                                        <div className="text-6xl mb-4">ðŸ’¸</div>
                                        <h3 className="text-xl font-semibold text-slate-700 mb-2">No expenses found</h3>
                                        <p className="text-slate-500 mb-6">Add your first expense to get started with tracking your finances!</p>
                                        <button
                                            onClick={() => setShowAddForm(true)}
                                            className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors"
                                        >
                                            Add Your First Expense
                                        </button>
                                    </div>
                                ) : (
                                    <div className="space-y-4 max-h-96 overflow-y-auto">
                                        {filteredExpenses.map(expense => {
                                            const category = getCategoryInfo(expense.category);
                                            return (
                                                <div key={expense.id} className="flex items-center justify-between p-4 bg-gradient-to-r from-slate-50 to-slate-100 rounded-lg hover:from-slate-100 hover:to-slate-200 transition-all duration-300 expense-item">
                                                    <div className="flex items-center gap-4">
                                                        <div 
                                                            className="w-14 h-14 rounded-full flex items-center justify-center text-xl shadow-md"
                                                            style={{ backgroundColor: category.color + '20', border: `2px solid ${category.color}40` }}
                                                        >
                                                            {category.icon}
                                                        </div>
                                                        <div>
                                                            <h3 className="font-semibold text-slate-800 text-lg">{expense.description}</h3>
                                                            <p className="text-slate-600 text-sm">{category.name} â€¢ {new Date(expense.date).toLocaleDateString()}</p>
                                                        </div>
                                                    </div>
                                                    <div className="flex items-center gap-4">
                                                        <span className="text-2xl font-bold text-slate-800">â‚¹{expense.amount.toFixed(2)}</span>
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => handleEdit(expense)}
                                                                className="p-2 text-blue-500 hover:bg-blue-100 rounded-lg transition-colors"
                                                                title="Edit expense"
                                                            >
                                                                <Icons.Edit />
                                                            </button>
                                                            <button
                                                                onClick={() => handleDelete(expense.id)}
                                                                className="p-2 text-red-500 hover:bg-red-100 rounded-lg transition-colors"
                                                                title="Delete expense"
                                                            >
                                                                <Icons.Trash />
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        )}

                        {viewMode === 'chart' && (
                            <div className="bg-white rounded-xl shadow-lg p-6 slide-up">
                                <h2 className="text-2xl font-bold mb-6 text-slate-800">Expense Distribution</h2>
                                {analytics.categoryTotals.length === 0 ? (
                                    <div className="text-center py-16">
                                        <div className="text-6xl mb-4">ðŸ“Š</div>
                                        <h3 className="text-xl font-semibold text-slate-700 mb-2">No data to display</h3>
                                        <p className="text-slate-500">Add some expenses to see your spending distribution!</p>
                                    </div>
                                ) : (
                                    <div className="space-y-6">
                                        {analytics.categoryTotals.map(category => {
                                            const percentage = (category.total / analytics.total) * 100;
                                            return (
                                                <div key={category.id} className="space-y-3">
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex items-center gap-3">
                                                            <span className="text-2xl">{category.icon}</span>
                                                            <span className="font-semibold text-slate-800">{category.name}</span>
                                                        </div>
                                                        <div className="text-right">
                                                            <div className="font-bold text-lg">â‚¹{category.total.toFixed(2)}</div>
                                                            <div className="text-sm text-slate-500">{percentage.toFixed(1)}%</div>
                                                        </div>
                                                    </div>
                                                    <div className="w-full bg-slate-200 rounded-full h-4 shadow-inner">
                                                        <div
                                                            className="h-4 rounded-full transition-all duration-1000 shadow-sm relative overflow-hidden"
                                                            style={{
                                                                width: `${percentage}%`,
                                                                backgroundColor: category.color,
                                                                background: `linear-gradient(90deg, ${category.color}, ${category.color}dd)`
                                                            }}
                                                        >
                                                            <div className="absolute inset-0 bg-white opacity-20 animate-pulse"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        )}

                        {viewMode === 'analytics' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl shadow-lg p-6 slide-up">
                                    <h2 className="text-2xl font-bold mb-6 text-slate-800">Daily Spending Trends</h2>
                                    {Object.keys(analytics.dailySpending).length === 0 ? (
                                        <div className="text-center py-16">
                                            <div className="text-6xl mb-4">ðŸ“ˆ</div>
                                            <h3 className="text-xl font-semibold text-slate-700 mb-2">No spending data available</h3>
                                            <p className="text-slate-500">Start adding expenses to see your daily trends!</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-3 max-h-80 overflow-y-auto">
                                            {Object.entries(analytics.dailySpending)
                                                .sort(([a], [b]) => new Date(b) - new Date(a))
                                                .slice(0, 15)
                                                .map(([date, amount]) => (
                                                    <div key={date} className="flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg hover:from-blue-100 hover:to-purple-100 transition-all duration-300">
                                                        <span className="font-semibold text-slate-800">{new Date(date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span>
                                                        <span className="font-bold text-xl text-blue-600">â‚¹{amount.toFixed(2)}</span>
                                                    </div>
                                                ))}
                                        </div>
                                    )}
                                </div>

                                <div className="bg-white rounded-xl shadow-lg p-6 slide-up">
                                    <h2 className="text-2xl font-bold mb-6 text-slate-800">Top Spending Categories</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {analytics.categoryTotals
                                            .sort((a, b) => b.total - a.total)
                                            .slice(0, 6)
                                            .map((category, index) => (
                                                <div key={category.id} className="relative overflow-hidden">
                                                    <div className="flex items-center gap-4 p-6 border-2 border-slate-200 rounded-xl hover:border-slate-300 transition-all duration-300 category-card bg-gradient-to-br from-white to-slate-50">
                                                        <div className="absolute top-2 right-2">
                                                            <span className="bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-bold">
                                                                #{index + 1}
                                                            </span>
                                                        </div>
                                                        <div 
                                                            className="w-16 h-16 rounded-full flex items-center justify-center text-2xl shadow-lg"
                                                            style={{ backgroundColor: category.color + '20', border: `3px solid ${category.color}` }}
                                                        >
                                                            {category.icon}
                                                        </div>
                                                        <div className="flex-1">
                                                            <h3 className="font-semibold text-slate-800 text-sm">{category.name}</h3>
                                                            <p className="text-2xl font-bold mt-1" style={{ color: category.color }}>
                                                                â‚¹{category.total.toFixed(2)}
                                                            </p>
                                                            <p className="text-xs text-slate-500 mt-1">
                                                                {((category.total / analytics.total) * 100).toFixed(1)}% of total
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                    </div>
                                </div>

                                {/* Additional Analytics */}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div className="bg-white rounded-xl shadow-lg p-6 slide-up">
                                        <h3 className="text-xl font-bold mb-4 text-slate-800">Quick Stats</h3>
                                        <div className="space-y-4">
                                            <div className="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                                                <span className="text-slate-700 font-medium">Highest Single Expense</span>
                                                <span className="font-bold text-blue-600">
                                                    â‚¹{filteredExpenses.length > 0 ? Math.max(...filteredExpenses.map(e => e.amount)).toFixed(2) : '0.00'}
                                                </span>
                                            </div>
                                            <div className="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                                                <span className="text-slate-700 font-medium">Lowest Single Expense</span>
                                                <span className="font-bold text-green-600">
                                                    ${filteredExpenses.length > 0 ? Math.min(...filteredExpenses.map(e => e.amount)).toFixed(2) : '0.00'}
                                                </span>
                                            </div>
                                            <div className="flex justify-between items-center p-3 bg-purple-50 rounded-lg">
                                                <span className="text-slate-700 font-medium">Most Used Category</span>
                                                <span className="font-bold text-purple-600">
                                                    {analytics.categoryTotals.length > 0 ? analytics.categoryTotals[0].name : 'None'}
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-white rounded-xl shadow-lg p-6 slide-up">
                                        <h3 className="text-xl font-bold mb-4 text-slate-800">Spending Insights</h3>
                                        <div className="space-y-4">
                                            <div className="p-4 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg border-l-4 border-yellow-500">
                                                <p className="text-sm text-slate-700">
                                                    <span className="font-semibold">Budget Tip:</span> Your top category is{' '}
                                                    {analytics.categoryTotals.length > 0 ? analytics.categoryTotals[0].name : 'Unknown'}.
                                                    Consider setting a monthly limit!
                                                </p>
                                            </div>
                                            <div className="p-4 bg-gradient-to-r from-blue-100 to-cyan-100 rounded-lg border-l-4 border-blue-500">
                                                <p className="text-sm text-slate-700">
                                                    <span className="font-semibold">Frequency:</span> You've made{' '}
                                                    {filteredExpenses.length} expense{filteredExpenses.length !== 1 ? 's' : ''} in the selected period.
                                                </p>
                                            </div>
                                            <div className="p-4 bg-gradient-to-r from-green-100 to-emerald-100 rounded-lg border-l-4 border-green-500">
                                                <p className="text-sm text-slate-700">
                                                    <span className="font-semibold">Diversity:</span> You're tracking{' '}
                                                    {analytics.categoryTotals.length} different spending categories.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Footer */}
                        <div className="text-center mt-12 pt-8 border-t border-slate-200">
                            <p className="text-slate-500 text-sm">
                                Expense Tracker Pro - Built with React & Tailwind CSS
                            </p>
                            <p className="text-slate-400 text-xs mt-2">
                                Your financial data is stored locally and never sent to external servers
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // Sample data for demonstration
        const sampleExpenses = [
            {
                id: 1,
                description: "Groceries at Whole Foods",
                amount: 87.50,
                category: "food",
                date: "2024-01-15",
                createdAt: "2024-01-15T10:30:00Z"
            },
            {
                id: 2,
                description: "Gas for car",
                amount: 45.20,
                category: "transport",
                date: "2024-01-14",
                createdAt: "2024-01-14T08:15:00Z"
            },
            {
                id: 3,
                description: "Movie tickets",
                amount: 25.00,
                category: "entertainment",
                date: "2024-01-13",
                createdAt: "2024-01-13T19:45:00Z"
            },
            {
                id: 4,
                description: "Electric bill",
                amount: 120.75,
                category: "bills",
                date: "2024-01-12",
                createdAt: "2024-01-12T14:20:00Z"
            }
        ];

        // Initialize with sample data if no existing data
        const initializeApp = () => {
            const existingData = localStorage.getItem('expenseTracker_expenses');
            if (!existingData) {
                localStorage.setItem('expenseTracker_expenses', JSON.stringify(sampleExpenses));
            }
        };

        // Initialize app
        window.addEventListener('load', initializeApp);

        // Render the application
        ReactDOM.render(<ExpenseTracker />, document.getElementById('root'));
    </script>
</body>
</html>